'use strict'

var curry = require('curry')
var object_map = require('./object_map.js')
var flip = require('./flip.js')

module.exports = curry(function map (fn, mappable) {
  var map_it = mappable.map
      ? mappable.map.bind(mappable)
      : flip(object_map)(mappable)

                // the index messes with currying
  return map_it(function (m) { return fn(m) }) })

'use strict'

var Task = require('data.task')
var xhr = require('xhr')
var curry = require('ramda').curry

var get = function (path) {
  return request('get', path, {})
}

var post = curry(function (body, path) {
  return request('post', path, { json: body })
})

var del = curry(function (path) {
  return request('del', path, {})
})

function request (method, path, options) {
  return new Task(function (reject, resolve) {
    xhr[method](path, options, function (err, res, body) {
      err ? reject(err) : resolve(res)
    })
  })
}

module.exports = { get: get, post: post, del: del, request: request }

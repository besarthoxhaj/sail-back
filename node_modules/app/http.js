'use strict'

var Task = require('data.task')
var xhr = require('xhr')
var curry = require('ramda').curry

var get = (path) => request('get', path, {})

var post = curry((body, path) => request('post', path, { json: body }))

var del = (path) => request('del', path, {})

function request (method, path, options) {
  return new Task(function (reject, resolve) {
    xhr[method](path, options, function (err, res, body) {
      err ? reject(err) : resolve(res)
    })
  })
}

module.exports = { get, post, del, request }

'use strict'

var standardise_date = require('./standardise_date.js')
var format_date = require('./format_date.js')
var curry = require('curry')
var clone = require('clone')

var transform_dated = curry(function (transform, dated_obj) {
  var cloned_obj = clone(dated_obj)
  Object.keys(dated_obj)
    .filter(function (key) { return key.match(/[dD]ate/) })
    .forEach(function (key) { cloned_obj[key] = transform(dated_obj[key]) })
  return cloned_obj })

transform_dated.standardise = transform_dated(standardise_date)
transform_dated.format = transform_dated(format_date)

module.exports = transform_dated

'use strict'

module.exports = format_date

function format_date (d) {
  var date = new Date(d) // allows arg to be date string
  if (!d || is_bad_date(date)) return d
  date.setHours(12) // hack because of weirdness with times, sails and waterline
  return date.toISOString().split('T')[0].split('-').reverse().join('/') }

format_date.format_due_date = function format_due (d) {
  return format_date(d).slice(0, -('/YYYY'.length))
}

function is_bad_date (date) {
  return isNaN(date.getTime()) }
